# =============================================================================
# TAC-WEBBUILDER ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values
# Required fields are marked with (REQUIRED)
# Optional fields are marked with (Optional)
# =============================================================================

# -----------------------------------------------------------------------------
# ANTHROPIC CONFIGURATION
# -----------------------------------------------------------------------------
# (REQUIRED) Your Anthropic API key for Claude Code programmatic mode
# Get your key from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=

# -----------------------------------------------------------------------------
# CLAUDE CODE CONFIGURATION
# -----------------------------------------------------------------------------
# (Optional) Path to Claude Code binary
# Default: claude
# To find your path, run: which claude
CLAUDE_CODE_PATH=claude

# (Optional) Keep Claude Code in project root after every command
# Recommended: true
CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR=true

# -----------------------------------------------------------------------------
# GITHUB CONFIGURATION
# -----------------------------------------------------------------------------
# (Optional) GitHub Personal Access Token
# Only needed if you want to use a different account than your 'gh auth' login
# If not set, ADW uses whatever account is authenticated via 'gh auth login'
# Get token from: https://github.com/settings/tokens
# Required scopes: repo, workflow
GITHUB_PAT=

# (Optional) Default GitHub repository for webbuilder
# Format: owner/repo-name
GITHUB_REPO_URL=

# (Optional) Auto-post issues without confirmation
# Default: false
AUTO_POST_ISSUES=false

# -----------------------------------------------------------------------------
# ADW WORKFLOW CONFIGURATION
# -----------------------------------------------------------------------------
# (Optional) Default ADW workflow to use
# Options: adw_sdlc_iso, adw_plan_build_test_iso, adw_build_iso
# Default: adw_sdlc_iso
DEFAULT_WORKFLOW=adw_sdlc_iso

# (Optional) Default model set for ADW workflows
# Options: base, heavy
# Default: base
DEFAULT_MODEL_SET=base

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# (Optional) Database type: sqlite or postgresql
# Default: sqlite (for backward compatibility)
# Set to 'postgresql' to use PostgreSQL after migration
DB_TYPE=sqlite

# PostgreSQL Configuration (only used if DB_TYPE=postgresql)
# Docker Compose will use these values
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=tac_webbuilder
POSTGRES_USER=tac_user
POSTGRES_PASSWORD=changeme_secure_password_here

# PostgreSQL Connection Pool Settings
POSTGRES_POOL_MIN=1
POSTGRES_POOL_MAX=10
POSTGRES_TIMEOUT=30

# pgAdmin Configuration (optional - for database management UI)
# Only starts with: docker-compose --profile admin up
PGADMIN_EMAIL=admin@localhost.local
PGADMIN_PASSWORD=changeme_pgadmin_password
PGADMIN_PORT=5050

# -----------------------------------------------------------------------------
# WEB UI PORT CONFIGURATION
# -----------------------------------------------------------------------------
# Port configuration is in .ports.env (not this file)
# Edit .ports.env to change ports:
#   BACKEND_PORT=8002    - Backend API server
#   FRONTEND_PORT=5173   - Frontend dev server (standard Vite port)
# These ports are used consistently across all services

# -----------------------------------------------------------------------------
# CLOUD SANDBOX (E2B)
# -----------------------------------------------------------------------------
# (Optional) E2B API key for cloud sandbox execution
# Used for isolated code execution in ADW workflows
# Get your key from: https://e2b.dev/docs
E2B_API_KEY=

# -----------------------------------------------------------------------------
# CLOUDFLARE TUNNEL
# -----------------------------------------------------------------------------
# (Optional) Cloudflare Tunnel token
# Used to expose webhook endpoint to GitHub (public internet)
# Only needed if you want GitHub to trigger ADW workflows automatically
# Get from: https://dash.cloudflare.com/
CLOUDFLARED_TUNNEL_TOKEN=

# -----------------------------------------------------------------------------
# CLOUDFLARE R2 (Screenshot Upload)
# -----------------------------------------------------------------------------
# (Optional) Cloudflare R2 configuration for uploading review screenshots
# If configured, screenshots will be uploaded to R2 and displayed in GitHub comments
# If not configured, local file paths will be shown instead
# Get from: https://dash.cloudflare.com/

CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_R2_ACCESS_KEY_ID=
CLOUDFLARE_R2_SECRET_ACCESS_KEY=
CLOUDFLARE_R2_BUCKET_NAME=
CLOUDFLARE_R2_PUBLIC_DOMAIN=

# -----------------------------------------------------------------------------
# PLAYWRIGHT MCP
# -----------------------------------------------------------------------------
# No environment variables needed for Playwright MCP
# Configuration is in playwright-mcp-config.json
# MCP server settings are in .mcp.json

# =============================================================================
# QUICK START CHECKLIST
# =============================================================================
# [ ] 1. Add ANTHROPIC_API_KEY (REQUIRED)
# [ ] 2. Verify CLAUDE_CODE_PATH with: which claude
# [ ] 3. Authenticate GitHub with: gh auth login
# [ ] 4. (Optional) Choose database: DB_TYPE=sqlite (default) or postgresql
# [ ] 5. (Optional - PostgreSQL) Start database: docker-compose up -d postgres
# [ ] 6. (Optional - PostgreSQL) Run migration: python migration/migrate_to_postgres.py
# [ ] 7. (Optional) Configure E2B for cloud sandboxing
# [ ] 8. (Optional) Set up Cloudflare Tunnel for webhooks
# [ ] 9. (Optional) Configure R2 for screenshot uploads
# [ ] 10. Test configuration with: ./scripts/test_config.sh
# =============================================================================
